## CHARMM-GUI で準備した構造、パラメーターファイルを使って続く計算の準備をする

### 準備するもの
1. CHARMM-GUI で準備した構造ファイル PDBファイル。
    Water box, solvent ions が付加されている必要があります。
    CHARMM-GUI で準備したパラメーターファイルは、解凍した中の`amber` ディレクトリに格納されています。
    このディレクトリにある `pdb` ファイルが必要です。
2. CHARMM-GUI で準備したパラメーターファイル。
    CHARMM-GUI で準備したパラメーターファイルは、解凍した中の`amber` ディレクトリに格納されています。
    このディレクトリにある `parm7`, `rst7` ファイルが必要です。

以上の3ファイルを `input` にコピーしてください。

### このステップを実行する前に

1. `export ROOT_DIR=$(pwd)` などを実行して、環境変数 `ROOT_DIR` に作業ディレクトリ（このリポジトリのルート）のパスを設定してください。

1. CHARMM-GUI で PDB ファイルの作成に使用した力場の種類を確認してください。
    `tidy_system.sh` を実行する際に、シミュレーションで使用する力場を設定します。

    CHARMM-GUI で適切な Amber 力場を設定して PDF ファイルを作成した場合は、既に Amber 独自の仕様に適した PDBファイルが作成されているはずですが、Amber側のツールを使って正しく PDF ファイルが作成されているかを確かめます。`tleap`　を使って Amber 用に構造を用意します。

    ここで指定する力場は、以後のステップでも同じに揃える必要があります。
    `tidy_system.sh` 実行時に何も指定しない場合、`ff14SB`, `tip3p` がデフォルトで使用されます。

### 実行方法

1. `tidy_system.sh` Amber 用に構造を作成する。PDBファイルで定義されている原子や残基のシンボルをAmberの仕様に合わせて変換したり、MDが行えるように整形が行われます。
1. `dry_system.sh` 準備した構造から水と溶媒イオンを取り除いた構造、パラメーターファイルを作成します。
2. `create_groups.sh` CURPの計算で用いる原子、残基のグループを定義するファイルを作成します。

の順に実行します。

### このステップの出力

`output` ディレクトリに、整形された構造ファイル、パラメーターファイル、グループ定義ファイルが作成されます。
